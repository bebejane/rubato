<div>
  {% if section.blocks.size == 0 and section.blocks[0].settings.image %}
    Add images...
  {% elsif section.blocks[0].settings.image %}

    {% for block in section.blocks %}

      {% capture a_href %}
        {%- if block.settings.page != blank -%}
          {{ block.settings.page.url }}
        {%- elsif block.settings.collection != blank -%}
          {{block.settings.collection.url}}
        {%- elsif block.settings.product != blank -%}
          {{block.settings.product.url}}
        {%- endif -%}
      {% endcapture %}
      
    {% endfor %}
  
  {% endif %}

{% schema %}
{
  "name": "Image Gallery",
  "tag": "section",
  "class": "blog-article-section blog-article-section-gallery",
  "max_blocks": 4,
  "blocks": [{
    "type": "image",
    "name": "Image",
    "settings": [
      {
        "type": "image_picker",
        "id": "image",
        "label": "Image"
      },
      {
        "type": "text",
        "id": "caption",
        "label": "Caption"
      },
      {
        "type": "product",
        "id": "product",
        "label": "Link product"
      },
      {
        "type": "collection",
        "id": "collection",
        "label": "Link collection"
      },
      {
        "type": "page",
        "id": "page",
        "label": "Link page"
      }
    ]
  }],
  "presets": [
    {
      "name": "Image Gallery"
    }
  ],
  "enabled_on": {
    "templates": ["article"]
  }
}
{% endschema %}