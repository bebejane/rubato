{{ 'section-ddp-banner.css' | asset_url | stylesheet_tag }}

<script type="text/javascript" src="{{ 'js.cookie.min.js' | asset_url }}" async="defer"></script>

{% assign is_home = false %}
{% assign is_ddp_enabled = false %}
{% capture ddp_settings_key %}ddp_{{ localization.country.iso_code }}{% endcapture %}
{% if settings[ddp_settings_key] == true %}
  {% assign is_ddp_enabled = true %}
{% endif %}
{% if request.path == '/' %}
  {% assign is_home = true %}
{% endif %}

{% if is_ddp_enabled %}
  <div id="ddp-banner">
    <div class="ddp-text">
      {{ settings.ddp_text }}
    </div>
    <div class="ddp-close">
      Close
    </div>
  </div>
{% endif %}

{% javascript %}

  function initBanner(){
    const close = document.querySelector('#ddp-banner .ddp-close');
    const banner = document.querySelector('#ddp-banner');

    close.addEventListener('click', function(){
      banner.style.display = 'none';
    });
    
  }

  document.addEventListener("DOMContentLoaded", initBanner);
  document.addEventListener("shopify:section:load", initBanner);

{% endjavascript %}